# F-000-P 多租户与账号管理 - 功能范围

**Feature ID**: F-000-P  
**创建日期**: 2026-02-25  
**状态**: draft

---

## 目标

为 RetailAI Copilot 平台提供多租户管理能力，支持企业客户独立入驻、数据隔离、账号统一管理，为 ToB 业务提供基础支撑。

---

## 目标用户

| 用户角色 | 使用场景 |
|---------|---------|
| **平台管理员** | 创建租户、配置租户配额、处理租户问题 |
| **租户管理员** | 管理本租户用户、配置企业信息、查看配额使用 |
| **普通用户** | 注册登录、修改个人信息、切换企业 |

---

## 范围边界

### In Scope（这次要做的）

- ✅ 租户创建/编辑/停用
- ✅ 租户配置（品牌 Logo、主题色、企业名称）
- ✅ 租户配额管理（门店数、用户数、API 调用量）
- ✅ 用户注册/登录（手机号、邮箱、企业微信）
- ✅ 密码管理（重置、强度策略）
- ✅ 租户数据隔离（数据库层面 + 应用层面）
- ✅ 登录会话管理（单点登录、多设备登录）
- ✅ 组织架构管理（总部 - 区域 - 门店）
- ✅ 门店档案管理

### Out of Scope（这次不做的）

- ❌ 复杂权限管理（属于 F-001-P）
- ❌ 数据连接器配置（属于 F-003-P）
- ❌ 企业微信/钉钉深度集成（二期）
- ❌ SAML/OAuth 企业身份对接（二期）

---

## 核心功能模块

```
F-000-P 多租户与账号管理
├── 租户管理
│   ├── 租户创建/编辑/停用
│   ├── 租户配置（品牌、主题）
│   ├── 租户配额管理
│   └── 租户数据隔离
│
├── 账号管理
│   ├── 用户注册/登录
│   ├── 密码管理
│   └── 会话管理
│
└── 组织与门店
    ├── 组织架构（总部 - 区域 - 门店）
    ├── 门店档案
    └── 门店关联（POS、设备）
```

---

## 成功指标

| 指标 | 目标值 | 测量方式 |
|------|--------|---------|
| 租户创建时间 | < 5 分钟 | 从注册到可用时间 |
| 登录成功率 | > 99.5% | 登录成功/尝试次数 |
| 数据隔离正确率 | 100% | 租户间数据零泄露 |
| 用户活跃度 | DAU > 70% | 日活跃用户占比 |

---

## 依赖关系

| 依赖类型 | 依赖对象 | 状态 |
|---------|---------|------|
| 技术依赖 | 数据库（PostgreSQL） | 需配置 |
| 技术依赖 | 缓存（Redis） | 需配置 |
| 技术依赖 | 短信服务 | 需对接 |
| 技术依赖 | 企业微信 API | 需对接 |
| 前置 Feature | 无 | - |

---

## 风险与假设

### 风险
1. **数据隔离风险** - 多租户数据隔离实现不当导致泄露
2. **性能风险** - 单库多租户模式下性能瓶颈
3. **集成风险** - 企业微信对接复杂度高

### 假设
1. 租户数量初期 < 100，后期可扩展至 1000+
2. 单租户用户数 < 500
3. 企业微信开放平台 API 稳定可用

---

## 验收标准（Feature 级）

1. **数据隔离** - 租户 A 用户无法访问租户 B 任何数据
2. **性能** - 核心 API 响应时间 < 200ms（P95）
3. **可用性** - 登录成功率 > 99.5%
4. **安全性** - 密码加密存储、传输加密、防暴力破解
5. **可扩展** - 支持动态增加租户，无需停机

---

*文档状态：待 Human 确认*
